<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fccagou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }

      table#arduino tr:nth-child(even) {
              background-color: #eee;
      }
      table#arduino tr:nth-child(odd) {
             background-color:#fff;
      }
      table#arduino th{
          background-color: #090;
                  color: white;
      }

    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="ico/favicon.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">fccagou</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python<b class="caret"></b></a>
                  <ul class="dropdown-menu">
	              <li><a href="http://www.python.org" target="python">python</a></li>
	              <li><a href="https://pypi.python.org" target="python">pypi</a></li>
		  </ul>
                </li>
                <li class="dropdown">
                  <a href="devs.html" class="dropdown-toggle" data-toggle="dropdown">Devs<b class="caret"></b></a>
                  <ul class="dropdown-menu">
	              <li><a href="devs.html">devs</a></li>
	              <li><a href="https://github.com" target="github">github</a></li>
		  </ul>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Diving<b class="caret"></b></a>
                  <ul class="dropdown-menu">
	              <li><a href="diving.html">Diving</a></li>
	              <li><a href="http://subsurface.hohndel.org/"
                          target="subsurface">Subsurface: opensource divelog program</a></li>
	              <li><a href="https://fr.divelogs.de/"
                          target="divelogs">divelogs: online divelogs book</a></li>
		  </ul>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Arduino<b class="caret"></b></a>
                  <ul class="dropdown-menu">
	              <li><a href="arduino.html">My sketchs</a></li>
	              <li><a href="http://www.arduino.cc/"
                          target="arduino">Arduino web site</a></li>
		  </ul>
                </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h3>Des trucs sur arduino</h3>
      <p>Les codes sources des sketch sont disponibles sur <a
          href="https://github.com/fccagou/arduino">github.com</a>
      </p>
      <h4>webClient </h4>
      <p>Un premier projet qui a pour but de piloter un arduino Ethernet depuis
      un site web.</p>
      <p>Il existe déjà des solutions comme <a
          href="https://www.teleduino.org/">Teleduino</a> mais ce projet est
      didactique pour la découverte du web et de l'electronique en famille</p>
      <p><a
          href="https://github.com/fccagou/arduino/tree/master/webClient"
          target="github">Code source</a>



    <script>


    var led_state=["img/led_white.png", "img/led_red.png"];
    var led_msg=["off", "on"];

    function arget (key) {
        var req = new XMLHttpRequest();
        req.open('GET', '/arduino/'+key+'/get', false); 
        req.send(null);
        return req.responseText;
    }


    function led_update(led,entry) {
        state = arget(led);
        document.getElementById(entry).src=led_state[state];
        document.getElementById(led+"_description").innerHTML=led+" is "+led_msg[state];
    }

    function update_label (key, entry) {
        document.getElementById(entry).innerHTML=arget(key);
    }

//    <p id="demo"></p>
//    var text = '{"name":"John Johnson","street":"Oslo West 16","phone":"555 1234567"}'
//
//    var obj = JSON.parse(text);
//
//    document.getElementById("demo").innerHTML =
//    obj.name + "<br>" +
//    obj.street + "<br>" +
//    obj.phone;

    var auto_update;
    var is_auto_check = false;

    function ar_manual_check() {
        clearInterval(auto_update);
        ar_update_interface();
        document.getElementById("ar_update").innerHTML = "auto update off";
        is_auto_check = false;
    }

    function ar_auto_check() {
        auto_update = setInterval(function () { ar_update_interface() }, 10000); 
        document.getElementById("ar_update").innerHTML = "auto update on";
        is_auto_check = true;
    }

    function ar_switch_check () {

        if (is_auto_check) {
            ar_manual_check ();
        } else {
            ar_auto_check ();
        }
    }


    function ar_update_interface() {
        led_update("led1", "arduino_led1");
        led_update("led2", "arduino_led2");
    }

    </script>

    
    <table id="arduino" width="300px">
        <caption>I/O states</caption>
        <tr>
            <th>I/O name</th>
            <th>Value</th>
            <th>Informations</th>
        </tr>
        <tr>
            <td>led1</td> 
            <td> <img id="arduino_led1" src="" width="15px" /> </td>
            <td id="led1_description"></td>
        </tr>
        <tr>
            <td>led2</td> 
            <td> <img id="arduino_led2" src="" width="15px" /> </td>
            <td id="led2_description" ></td>
        </tr>
    </table>
    <p></p>
    <button type="button" id="ar_update" onclick="ar_switch_check()"></button>


    </div> <!-- /container -->
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>
    <script>
        ar_manual_check();
    </script>

  </body>
</html>
